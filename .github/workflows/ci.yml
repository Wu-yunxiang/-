name: Java CI with Maven

# 触发条件：push 到 main，或向 main 发起 PR 时自动运行
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    # GitHub Actions 运行环境
    runs-on: ubuntu-latest

    steps:
    # 1) 拉取仓库代码
    - uses: actions/checkout@v4

    # 2) 配置 JDK 17（Temurin）并启用 Maven 依赖缓存
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: maven

    # 3) Maven 构建（package 阶段默认会执行测试）
    - name: Build with Maven
      run: mvn -B package --file pom.xml
